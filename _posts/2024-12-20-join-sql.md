---
layout: post
title: C√°c lo·∫°i JOIN trong SQL
subtitle: Hi·ªÉu r√µ INNER JOIN, LEFT JOIN, RIGHT JOIN v√† FULL JOIN trong SQL qua v√≠ d·ª• th·ª±c t·∫ø.
cover-img: /assets/img/code-sql.jpg
thumbnail-img: /assets/img/sql-thumb.png
share-img: /assets/img/sql.bin
tags: [books, blogs, SQL Server, SQL]
comments: true
---

### 1. T·ªïng quan: SQL JOIN l√† g√¨?

Trong qu√° tr√¨nh l√†m vi·ªác v·ªõi c∆° s·ªü d·ªØ li·ªáu quan h·ªá (RDBMS), vi·ªác k·∫øt h·ª£p d·ªØ li·ªáu t·ª´ nhi·ªÅu b·∫£ng l√† ƒëi·ªÅu kh√¥ng th·ªÉ tr√°nh kh·ªèi. ƒê√≥ l√† l√∫c b·∫°n c·∫ßn ƒë·∫øn **SQL JOIN**.

Tuy nhi√™n, n·∫øu kh√¥ng n·∫Øm r√µ t·ª´ng lo·∫°i `JOIN`, b·∫°n d·ªÖ g·∫∑p l·ªói logic, thi·∫øu d·ªØ li·ªáu ho·∫∑c k·∫øt qu·∫£ kh√¥ng nh∆∞ mong mu·ªën.

Trong b√†i vi·∫øt n√†y, ch√∫ng ta s·∫Ω c√πng kh√°m ph√° 4 lo·∫°i `JOIN` ph·ªï bi·∫øn nh·∫•t trong SQL:

* `INNER JOIN`
* `LEFT JOIN`
* `RIGHT JOIN`
* `FULL OUTER JOIN`

B·∫±ng c√°ch s·ª≠ d·ª•ng h√¨nh minh ho·∫° v√† v√≠ d·ª• th·ª±c t·∫ø, b·∫°n s·∫Ω d·ªÖ d√†ng ph√¢n bi·ªát ch√∫ng v√† bi·∫øt khi n√†o n√™n d√πng lo·∫°i `JOIN` n√†o.

>**`JOIN` l√† c√¢u l·ªánh d√πng ƒë·ªÉ k·∫øt h·ª£p d·ªØ li·ªáu t·ª´ hai ho·∫∑c nhi·ªÅu b·∫£ng d·ª±a tr√™n m·ªôt ƒëi·ªÅu ki·ªán li√™n k·∫øt, th∆∞·ªùng l√† m·ªôt kh√≥a chung gi·ªØa c√°c b·∫£ng.**


<div style="border: 1px solid #e6e6e6; margin:64px 0"></div>

### 2. T√¨nh hu·ªëng minh h·ªça th·ª±c t·∫ø
H√£y t∆∞·ªüng t∆∞·ª£ng b·∫°n ƒëang qu·∫£n l√Ω m·ªôt h·ªá th·ªëng b√°n h√†ng, v·ªõi hai b·∫£ng d·ªØ li·ªáu:  

B·∫£ng `customers` ‚Äì Danh s√°ch kh√°ch h√†ng:

| <small>**customer_id**<small/> | <small>**name**<small/> | 
|----------------------|-------------------------------------|
| <small>1<small/> | <small>Lan<small/> |
| <small>2<small/> | <small>H√πng<small/> | 
| <small>3<small/> | <small>Mai<small/> | 
| <small>4<small/> | <small>An<small/> |
{: style="width:100%; margin-bottom:16px"}

B·∫£ng `orders` ‚Äì Danh s√°ch ƒë∆°n h√†ng:


| <small>**order_id**<small/> | <small>**customer_id**<small/> | <small>**product**<small/> |
|----------------------|-------------------------------------|---------------------------------------------------------------------|
| <small>101<small/> | <small>1<small/> | <small>Laptop<small/> | 
| <small>102<small/> | <small>2<small/> | <small>iPhone<small/> |
| <small>103<small/> | <small>1<small/> | <small>B√†n ph√≠m<small/> | 
| <small>104<small/> | <small>5<small/> | <small>Chu·ªôt<small/> |
{: style="width:100%; margin-bottom:16px"}

![sql-joins](../assets/img/sql-joins.jpg){: style="width: 100%; margin-bottom:24px"}


* `INNER JOIN` **- L·∫•y nh·ªØng b·∫£n ghi kh·ªõp ·ªü c·∫£ hai b·∫£ng**
<div style='margin-top:16px'></div>

```
SELECT customers.name, orders.product
FROM customers
INNER JOIN orders ON customers.customer_id = orders.customer_id;
```

<div style='margin-bottom:16px'></div>

K·∫øt qu·∫£:

| <small>**name**<small/> | <small>**product**<small/> | 
|----------------------|-------------------------------------|
| <small>Lan<small/> | <small>Laptop<small/> |
| <small>Lan<small/> | <small>B√†n ph√≠m<small/> | 
| <small>H√πng<small/> | <small>iPhone<small/> | 
{: style="width:100%; margin-bottom:16px"}

*üîç Ch·ªâ l·∫•y nh·ªØng ƒë∆°n h√†ng c√≥ kh√°ch h√†ng t·ªìn t·∫°i v√† ng∆∞·ª£c l·∫°i. B·ªè qua d·ªØ li·ªáu kh√¥ng kh·ªõp.*

* `LEFT JOIN` **- L·∫•y to√†n b·ªô d·ªØ li·ªáu t·ª´ b·∫£ng b√™n tr√°i (customers)**

```
SELECT customers.name, orders.product
FROM customers
LEFT JOIN orders ON customers.customer_id = orders.customer_id;
```

<div style='margin-bottom:16px'></div>

K·∫øt qu·∫£:

| <small>**name**<small/> | <small>**product**<small/> | 
|----------------------|-------------------------------------|
| <small>Lan<small/> | <small>Laptop<small/> |
| <small>Lan<small/> | <small>B√†n ph√≠m<small/> | 
| <small>H√πng<small/> | <small>iPhone<small/> | 
| <small>Mai<small/> | <small>NULL<small/> |
| <small>An<small/> | <small>NULL<small/> | 
{: style="width:100%; margin-bottom:16px"}

*üîç Hi·ªÉn th·ªã to√†n b·ªô kh√°ch h√†ng, d√π c√≥ ƒë∆°n h√†ng hay kh√¥ng. C√°c d√≤ng kh√¥ng c√≥ ƒë∆°n h√†ng s·∫Ω ƒë∆∞·ª£c ƒëi·ªÅn NULL.*

* `RIGHT JOIN` **- L·∫•y to√†n b·ªô d·ªØ li·ªáu t·ª´ b·∫£ng b√™n ph·∫£i (orders)**

```
SELECT customers.name, orders.product
FROM customers
RIGHT JOIN orders ON customers.customer_id = orders.customer_id;
```

<div style='margin-bottom:16px'></div>

K·∫øt qu·∫£:

| <small>**name**<small/> | <small>**product**<small/> | 
|----------------------|-------------------------------------|
| <small>Lan<small/> | <small>Laptop<small/> |
| <small>Lan<small/> | <small>B√†n ph√≠m<small/> | 
| <small>H√πng<small/> | <small>iPhone<small/> | 
| <small>NULL<small/> | <small>Chu·ªôt<small/> |
{: style="width:100%; margin-bottom:16px"}

*üîç Hi·ªÉn th·ªã to√†n b·ªô ƒë∆°n h√†ng, d√π c√≥ th√¥ng tin kh√°ch h√†ng hay kh√¥ng.*

* `FULL OUTER JOIN` **- K·∫øt h·ª£p t·∫•t c·∫£ d·ªØ li·ªáu t·ª´ hai b·∫£ng**

```
SELECT customers.name, orders.product
FROM customers
FULL OUTER JOIN orders ON customers.customer_id = orders.customer_id;
```

<div style='margin-bottom:16px'></div>

>üí° L∆∞u √Ω: MySQL kh√¥ng h·ªó tr·ª£ `FULL OUTER JOIN` tr·ª±c ti·∫øp. C√≥ th·ªÉ m√¥ ph·ªèng b·∫±ng `UNION` gi·ªØa `LEFT JOIN` v√† `RIGHT JOIN`.

K·∫øt qu·∫£:

| <small>**name**<small/> | <small>**product**<small/> | 
|----------------------|-------------------------------------|
| <small>Lan<small/> | <small>Laptop<small/> |
| <small>Lan<small/> | <small>B√†n ph√≠m<small/> | 
| <small>H√πng<small/> | <small>iPhone<small/> | 
| <small>Mai<small/> | <small>NULL<small/> |
| <small>An<small/> | <small>NULL<small/> | 
| <small>NULL<small/> | <small>Chu·ªôt<small/> | 
{: style="width:100%; margin-bottom:16px"}

*üîç Hi·ªÉn th·ªã to√†n b·ªô kh√°ch h√†ng v√† to√†n b·ªô ƒë∆°n h√†ng, d√π c√≥ li√™n k·∫øt hay kh√¥ng.*

**So s√°nh nhanh c√°c lo·∫°i `JOIN`**


| <small>**`JOIN`**<small/> | <small>**B·∫£ng A (customers)**<small/> | <small>**b·∫£ng B (orders)**<small/> | <small>**Khi kh√¥ng kh·ªõp**<small/> | <small>**D√πng khi n√†o?**<small/> |
|----------------------|----------------------|----------------------|----------------------|
| <small>`INNER JOIN`<small/> | <small>C√≥ kh·ªõp<small/> | <small>C√≥ kh·ªõp<small/> | <small>B·ªè qua<small/>| <small>Ch·ªâ c·∫ßn d·ªØ li·ªáu c√≥ li√™n h·ªá t·ª´ c·∫£ hai b·∫£ng<small/>|
| <small>`LEFT JOIN`<small/> | <small>T·∫•t c·∫£<small/> | <small>C√≥ kh·ªõp<small/> | <small>NULL b√™n ph·∫£i<small/>| <small>Gi·ªØ to√†n b·ªô d·ªØ li·ªáu b·∫£ng ch√≠nh (b·∫£ng A)<small/>|
| <small>`RIGHT JOIN`<small/> | <small>C√≥ kh·ªõp<small/> | <small>T·∫•t c·∫£<small/> | <small>NULL b√™n tr√°i<small/>| <small>Gi·ªØ to√†n b·ªô d·ªØ li·ªáu b·∫£ng ph·ª• (b·∫£ng B)<small/>|
| <small>`FULL OUTER JOIN`<small/> | <small>T·∫•t c·∫£<small/> | <small>T·∫•t c·∫£<small/> | <small>NULL n·∫øu kh√¥ng kh·ªõp<small/>| <small>T·ªïng h·ª£p ƒë·∫ßy ƒë·ªß d·ªØ li·ªáu t·ª´ c·∫£ hai b·∫£ng, k·ªÉ c·∫£ kh√¥ng kh·ªõp<small/>|
{: style="width:100%"}

<div style="border: 1px solid #e6e6e6; margin:64px 0"></div>

### 3. L·ªùi k·∫øt
Vi·ªác hi·ªÉu r√µ t·ª´ng lo·∫°i `JOIN` kh√¥ng ch·ªâ gi√∫p b·∫°n vi·∫øt truy v·∫•n ch√≠nh x√°c h∆°n, m√† c√≤n gi√∫p b·∫°n x·ª≠ l√Ω d·ªØ li·ªáu hi·ªáu qu·∫£, tr√°nh m·∫•t th√¥ng tin quan tr·ªçng.

